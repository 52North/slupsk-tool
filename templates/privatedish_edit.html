<!DOCTYPE html>
<html>
  <head>
    <title>{{^id}}Add{{/id}}{{#id}}Edit{{/id}} private dish</title>
    {{>head}}
  </head>
  <body>
    <div data-role="page">
      <div data-role="header">
        {{>home}}
        <h1>{{^id}}Add{{/id}}{{#id}}Edit{{/id}} private dish</h1>
        {{#id}}
        {{#page_config.can_delete}}
        <form action="{{svc}}/privatedishs/{{id}}" method="post" data-ajax="false"
          data-wq-json="true" data-wq-background-sync="false"
          onsubmit="return require('wq/app').confirmSubmit(this, 'Are you sure you want to delete this record?');">
          {{>csrf}}
          <input type=hidden name="_method" value="DELETE">
          <button type="submit" data-icon="delete" class="ui-btn-right">
            Delete
          </button>
        </form>
        {{/page_config.can_delete}}
        {{/id}}
      </div>
      <div role="main" class="ui-content">
        <form action="{{svc}}/privatedishs/{{id}}" method="post" data-ajax="false"
            data-wq-json="true"
            {{#outbox_id}}
              data-wq-outbox-id="{{outbox_id}}"
              data-wq-outbox-preserve=""
            {{/outbox_id}}>
          {{>csrf}}
          {{#id}}
          <input type=hidden name="_method" value="PUT">
          {{/id}}
          <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">1) Dish</li>
            <li class="ui-field-contain">
              <label for='privatedish-name'>Enter the name of the dish</label>
              <input id='privatedish-name' type='text' data-xform-type='string' name='name' value="{{name}}">
              <p class='error privatedish-name-errors'></p>
            </li>
            <li class="ui-field-contain">
              <label for='privatedish-ingredient_list'>Ingredients</label>
              <textarea id='privatedish-ingredient_list' name='ingredient_list' data-xform-type="text">{{ingredient_list}}</textarea>
              <p class="hint">Please enter the name of the ingredients separated by a comma.</p>
              <p class='error privatedish-ingredient_list-errors'></p>
            </li>
            <li class="ui-field-contain">
              <label for='kindergartendish-water_quantity'>Enter the quantity of water used (litres)</label>
              <input id='kindergartendish-water_quantity' type='number' data-xform-type='int' name='water_quantity' value="{{water_quantity}}">
              <p class='error kindergartendish-water_quantity-errors'></p>
            </li>
            <li class="ui-field-contain">
              <label for='kindergartendish-cooking_time'>Enter the cooking time (minutes)</label>
              <input id='kindergartendish-cooking_time' type='number' data-xform-type='int' name='cooking_time' value="{{cooking_time}}">
              <p class='error kindergartendish-cooking_time-errors'></p>
            </li>
            <li data-role="list-divider">2) Ingredients</li>
            <li data-xform-type='note'>
              <p class="label">Please give detailed information about some of the ingredients if they are included in the choices below.</p>
            </li>
            {{#compositions}}
            {{^new_attachment}}{{#id}}
            <input type="hidden" name="compositions[{{@index}}][id]" value="{{id}}">
            {{/id}}{{/new_attachment}}
            <li class="ui-field-contain">
              <div data-role="collapsible" class="section-compositions" data-collapsed="false">
                <h4>Ingredient {{@index}}</h4>
                <ul data-role="listview" data-inset="true">
                  <li class="ui-field-contain">
                    <label for='privatedish-compositions-{{@index}}-ingredient_id'>Ingredient</label>
                    <select id='privatedish-compositions-{{@index}}-ingredient_id' data-xform-type='string' name='compositions[{{@index}}][ingredient_id]'>
                      <option value="">Select one...</option>
                      {{#ingredient_list}}
                      <option value="{{id}}"{{#selected}} selected{{/selected}}>
                        {{#outbox}}*{{/outbox}} {{{label}}}
                      </option>
                      {{/ingredient_list}}
                    </select>
                    <p class='error privatedish-compositions-{{@index}}-ingredient_id-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <label for='privatedish-compositions-{{@index}}-shop_id'>Where was it bought?</label>
                    <select id='privatedish-compositions-{{@index}}-shop_id' class="shop-select" data-xform-type='string' name='compositions[{{@index}}][shop_id]'>
                      <option value="">Select one...</option>
                      {{#shop_list}}
                      <option value="{{id}}"{{#selected}} selected{{/selected}}>
                        {{#outbox}}*{{/outbox}} {{{label}}}
                      </option>
                      {{/shop_list}}
                    </select>
                    <p class='error privatedish-compositions-{{@index}}-shop_id-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Enter the place of origin</legend>
                      {{#origin_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-origin-{{name}}' name='compositions[{{@index}}][origin]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-origin-{{name}}'>{{{label}}}</label>
                      {{/origin_choices}}
                    </fieldset>
                    <p class='error privatedish-compositions-{{@index}}-origin-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Enter the mode of production</legend>
                      {{#production_mode_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-production_mode-{{name}}' name='compositions[{{@index}}][production_mode]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-production_mode-{{name}}'>{{{label}}}</label>
                      {{/production_mode_choices}}
                    </fieldset>
                    <p class='error privatedish-compositions-{{@index}}-production_mode-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <label for='privatedish-compositions-{{@index}}-price'>Enter the price (PLN)</label>
                    <input id='privatedish-compositions-{{@index}}-price' type='number' data-xform-type='decimal' name='compositions[{{@index}}][price]' step='0.001' value="{{price}}">
                    <p class='error privatedish-compositions-{{@index}}-price-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Was the ingredient bought directly from the producer?</legend>
                      {{#from_producer_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-from_producer-{{name}}' name='compositions[{{@index}}][from_producer]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-from_producer-{{name}}'>{{{label}}}</label>
                      {{/from_producer_choices}}
                    </fieldset>
                    <p class='error privatedish-compositions-{{@index}}-from_producer-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <label for='privatedish-compositions-{{@index}}-distance'>Enter the distance (km) from the shop or producer to your house</label>
                    <input id='privatedish-compositions-{{@index}}-distance' type='number' data-xform-type='decimal' name='compositions[{{@index}}][distance]' step='0.001' value="{{distance}}">
                    <p class="hint">Usually, you should enter the distance from the shop. Only if bought directly from the producer, enter the distance (km) from the producer to your house. You can use the map below to estimate the distance.</p>
                    <p class='error privatedish-compositions-{{@index}}-distance-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Did you like it?</legend>
                      {{#satisfaction_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-satisfaction-{{name}}' name='compositions[{{@index}}][satisfaction]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-satisfaction-{{name}}'>{{{label}}}</label>
                      {{/satisfaction_choices}}
                    </fieldset>
                    <p class='hint'>(1 = „it was awful&quot;, 5 = „it was delicious&quot;)</p>
                    <p class='error privatedish-compositions-{{@index}}-satisfaction-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Do you think it is healthy?</legend>
                      {{#health_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-health-{{name}}' name='compositions[{{@index}}][health]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-health-{{name}}'>{{{label}}}</label>
                      {{/health_choices}}
                    </fieldset>
                    <p class='hint'>(1 = „it is very bad for my health&quot;, 5 = „it is very healthy&quot;)</p>
                    <p class='error privatedish-compositions-{{@index}}-health-errors'></p>
                  </li>
                  <li class="ui-field-contain">
                    <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                      <legend>Do you think it is a high quality product?</legend>
                      {{#quality_choices}}
                      <input type='radio' id='privatedish-compositions-{{@index}}-quality-{{name}}' name='compositions[{{@index}}][quality]' value='{{name}}'{{#selected}} checked{{/selected}}>
                      <label for='privatedish-compositions-{{@index}}-quality-{{name}}'>{{{label}}}</label>
                      {{/quality_choices}}
                    </fieldset>
                    <p class='hint'>(1 = „bad quality&quot;, 5 = „high quality&quot;)</p>
                    <p class='error privatedish-compositions-{{@index}}-quality-errors'></p>
                  </li>
                  <li>
                    <button type="button" data-wq-action="removeattachment" data-wq-section="compositions">
                      Delete ingredient
                    </button>
                  </li>
                </ul>
              </div>
            </li>
            {{/compositions}}
            <li>
              <button type="button" data-wq-action="addattachment" data-wq-section="compositions">
                 Add ingredient
              </button>
            </li>
            <li>
              <label for='privatedish-distance_calculator'>Use the line tool in the map to estimate the distance.</label>
              <input type='hidden' data-xform-type='geotrace' name='distance_calculator'>
              <div class="map edit-map" id='privatedish-{{id}}{{^id}}new{{/id}}-edit-map'></div>
              <p class='error privatedish-distance_calculator-errors'></p>
            </li>
            <li>
              <div class="ui-grid-a">
                <div class="ui-block-a">
                  <a href="{{rt}}/" data-role="button" data-icon="back" data-direction="reverse">
                    Back
                  </a>
                </div>
                <div class="ui-block-b">
                  <button type="submit" data-icon="check" data-theme="b">
                    Submit
                  </button>
                </div>
              </div>
              <p class="error privatedish-errors"></p>
            </li>
          </ul>
        </form>
      </div>
    </div>
  </body>
</html>
